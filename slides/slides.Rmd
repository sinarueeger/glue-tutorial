---
title: "Glue numbers and letters in R"
author: "Sina RÃ¼eger"
date: "July 13, 2020"
output:
  xaringan::moon_reader:
    css: ["default-fonts", "default", "my-theme.css"]
    lib_dir: libs
    nature:
      beforeInit: "https://platform.twitter.com/widgets.js"
      highlightStyle: github
      highlightLines: true
      titleSlideClass: [top, right]
      
---

<!-- 
<!-- From here: https://slides.yihui.name/xaringan/ -->

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library <- function(...) suppressPackageStartupMessages(base::library(...))
knitr::opts_chunk$set(
  tidy = TRUE
)
library(dplyr)
library(glue)

```

---
layout: true

---
class: left, top

Sometimes you want to do the following:

## 1. Write analysis results as inline text

```{r echo=FALSE}
n <- 100
dat_study <- as_tibble(data.frame(id = glue("id_{id}", id = sample(100:999, n)), state = sample(c("Uusimaa", "Ostrobothnia", "South Karelia", "Lapland"), n, replace = TRUE))) 
dat_study
```

```{r include=FALSE, tidy=FALSE}
states <- glue_collapse(unique(dat_study$state), sep = ", ", last = " and ")
glue("The study participants were from four different Finnish states: {states}.")
```
The study participants were from four different Finnish states: Ostrobothnia, Uusimaa, South Karelia and Lapland. 

---
class: left, top

## 2. Create a new column as a function of two (text) columns


```{r echo=FALSE}
dat <- as_tibble(data.frame(chromosome = c(1, 1, 3), position = c(50, 30, 70)) %>% 
  mutate(variant = glue("chr{chromosome}_{position}")))
dat
```

---
class: left, top

## 3. custom output file path

define a directory at the beginning of a script and store everything there


```{r, eval = FALSE}
## save a plot
ggsave("/data/haemoglobin/experiment-2020-07-13.pdf")

## save data
write_tsv(data, path = "/data/haemoglobin/experiment-2020-07-13.tsv")
```




---
class: left, top

# Solution: Combining R data objects into strings

`This is some text {NUMBER} and {NUMBER}`

For example:
```
This year,  South of Finland had on average 
{NUMBER_SUN} days of sunshine and {NUMBER_SNOW} of days snowfall
```

results in
```
This year, South of Finland had on average 
50 days of sunshine and 3 of days snowfall
```

---
class: left, top

# Glue!

```{r, comment = "", tidy = FALSE}
glue("This year,  South of Finland had on average {NUMBER_SUN} 
     days of sunshine and {NUMBER_SNOW} of days snowfall", 
     NUMBER_SUN = 50, NUMBER_SNOW = 3)
```

---
class: left, top

# Live coding

Go to [`glue-examples.R`](https://github.com/sinarueeger/glue-tutorial/blob/master/glue-examples.R)


---
class: left, top

# Find out more

- https://glue.tidyverse.org/index.html
- glue also appears in the [`stringr` cheatsheet](https://raw.githubusercontent.com/rstudio/cheatsheets/master/strings.pdf)





